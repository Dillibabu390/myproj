pipeline {
agent any

stages {
stage('Checkout') {
steps {
git branch: 'main', url: 'https://gitlab.com/nandhini_maha/springdemo.git'
}
}

stage('Build') {
steps {
withEnv ( ['JENKINS_NODE_COOKIE=do_not_kill'] )
{
sh 'mvn clean install'
}
}
}

stage('Run') {
steps {
withEnv ( ['JENKINS_NODE_COOKIE=do_not_kill'] )
{
sh 'start java -jar target/demo-0.0.1-SNAPSHOT.jar&'
}
}
}

}
}
